!function(e){function t(t){for(var r,l,u=t[0],i=t[1],c=t[2],p=0,f=[];p<u.length;p++)l=u[p],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&f.push(o[l][0]),o[l]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(s&&s(t);f.length;)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},o={4:0},a=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var s=i;a.push([406,0,1]),n()}({406:function(e,t,n){n(87),e.exports=n(411)},411:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(35),l=n.n(a),u=n(60),i=n.n(u),c=n(13),s=n(2),p=n(175);n(408);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}c.setLocale(p);var d="blank",y="iri",b="predicate",v="blank-predicate",m="literal";function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e,t,n,r,o,a,l){try{var u=e[a](l),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){w(a,r,o,l,u,"next",e)}function u(e){w(a,r,o,l,u,"throw",e)}l(void 0)}))}}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}c.Blocks.node={init:function(){var e;this.jsonInit((f(e={type:"node",message0:"%1 %2",inputsInline:!0,args0:[{type:"input_value",name:"subject",check:[y,d]},{type:"input_statement",name:"predicate",check:[b,v]}]},"inputsInline",!0),f(e,"output","node"),f(e,"colour",100),e))}},c.Blocks[b]={init:function(){this.jsonInit({type:b,message0:"〈%1〉%2",args0:[{type:"field_input",name:"id"},{type:"input_value",name:"object",check:["String","Boolean","Number",m,y,d,"node"]}],previousStatement:[b,v],nextStatement:[b,v],colour:260})}},c.Blocks[v]={init:function(){this.jsonInit({type:v,message0:"_:%1 %2",args0:[{type:"field_variable",name:"id"},{type:"input_value",name:"object",check:["String","Boolean","Number",m,y,d,"node"]}],previousStatement:[b,v],nextStatement:[b,v],colour:180})}},c.Blocks[d]={init:function(){this.jsonInit({type:d,message0:"_∶%1",args0:[{type:"field_variable",name:"id"}],output:d,colour:330})}},c.Blocks[y]={init:function(){this.jsonInit({type:y,message0:"〈%1〉",args0:[{type:"field_input",name:"id"}],output:y,colour:30})}},c.Blocks[m]={init:function(){this.jsonInit({type:m,message0:'"%1"',message1:"‹%1›",args0:[{type:"field_input",name:"value"}],args1:[{type:"field_input",name:"type"}],output:m,colour:60})}};var P=document.getElementById("panel"),B=0,I=['block[type="node"] block[type="blank"]','block[type="blank-predicate"]','block[type="blank"]'].map((function(e){return document.querySelector("#toolbox > ".concat(e," field"))})),q={schema:"http://schema.org/",prov:"http://www.w3.org/ns/prov#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",dc:"http://purl.org/dc/elements/1.1/",u:"http://underlay.mit.edu/ns#"},T=JSON.stringify(q,null,"  "),V=document.getElementById("toolbox"),N=document.getElementById("blocklyArea"),C=document.getElementById("blocklyDiv"),F=c.inject(C,{toolbox:V}),D=function(e){var t=N.offsetWidth,n=N.offsetHeight,r=N,o=0,a=0;do{o+=r.offsetLeft,a+=r.offsetTop,r=r.offsetParent}while(r);C.style.left=o+"px",C.style.top=a+"px",C.style.width=t+"px",C.style.height=n+"px",c.svgResize(F)};addEventListener("resize",D,!1),D(),c.svgResize(F);var R={"@context":function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},q,{"prov:value":{"@container":"@list"}}),"@requireAll":!1,"u:satisfies":{},"prov:value":{},"prov:wasDerivedFrom":{}};function A(e,t,n,r){var o,a;switch(e.type){case"text":return o=M(e.getFieldValue("TEXT")),'"'.concat(o,'"');case"math_number":return a=(o=Number(e.getFieldValue("NUM")))===parseInt(o)?XSD_INTEGER:s.k,'"'.concat(o,'"^^<').concat(a,">");case"logic_boolean":return o=e.getFieldValue("BOOL").toLowerCase(),'"'.concat(o,'"^^<').concat(s.h,">");case m:return o=e.getFieldValue("value"),a=e.getFieldValue("type"),'"'.concat(M(o),'"^^<').concat(L(a),">");case y:return"<".concat(L(e.getFieldValue("id")),">");case d:return"_:".concat(F.getVariableById(e.getFieldValue("id")).name);case v:case b:return}var l=e.getInputTargetBlock("subject");if(null===l)return null;for(var u=A(l,t,n,r),i=e.getInputTargetBlock("predicate");null!==i;i=i.getNextBlock()){var c=i.getFieldValue("id"),p=i.type===v?"_:".concat(F.getVariableById(c).name):"<".concat(L(c),">"),f=i.getInputTargetBlock("object");if(null!==f){var g=A(f,t,n,r);null!==g&&t.push("".concat(u," ").concat(p," ").concat(g," ").concat(r," ."))}}return u}function L(e){for(var t in q)if(0===e.indexOf(t)&&":"===e[t.length])return q[t]+e.slice(t.length+1);return e}var M=function(e){return e.replace(/[\\"]/g,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")};F.createVariable("b0",null,"0"),F.registerButtonCallback("variable",(function(e){var t="b".concat(++B),n=(F.createVariable(t).getId(),!0),r=!1,o=void 0;try{for(var a,l=I[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){a.value.textContent=t}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}}));var J=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=k(t).call(this,e),n=!o||"object"!==g(o)&&"function"!=typeof o?x(r):o,E(x(n),"handleClick",O(regeneratorRuntime.mark((function e(){var t,r,o,a,l,u,c,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n.state.quads){e.next=2;break}return e.abrupt("return");case 2:return console.log(n.state.quads),e.next=5,fetch("/",{method:"POST",headers:{"Content-Type":"application/n-quads"},body:n.state.quads});case 5:if(200!==(t=e.sent).status){e.next=22;break}return e.next=9,t.json();case 9:return r=e.sent,console.log(r),e.next=13,i.a.frame(r,R);case 13:o=e.sent,a=h(o["@graph"],1),l=a[0],u=l["u:satisfies"],c=l["prov:value"],s=l["prov:wasDerivedFrom"],n.setState({q:u,values:c,prov:s}),e.next=24;break;case 22:console.error(t.statusText),n.setState({q:null,values:null,prov:null});case 24:case"end":return e.stop()}}),e)})))),n.state={disabled:!0,quads:null,q:null,values:null,prov:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,e),n=t,a=[{key:"renderResult",value:function(e,n,r){if(null===e||null===n)return null;var a=e["@id"].indexOf("#");return o.a.createElement("table",null,o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",{colSpan:"2",className:"query"},"<",e["@id"],">")),Array.isArray(n)&&n.length>0&&null!==r?n.map((function(e,n){var r=e["@id"],l=e["rdf:value"];return o.a.createElement("tr",{key:n},o.a.createElement("td",null,r.slice(a+1)),o.a.createElement("td",null,t.renderValue(l)))})):o.a.createElement("td",null,o.a.createElement("td",{colSpan:"2"},"No results"))))}},{key:"renderValue",value:function(e){return"object"!==g(e)?JSON.stringify(e):e.hasOwnProperty("@id")?"<".concat(e["@id"],">"):e.hasOwnProperty("@value")?JSON.stringify(e["@value"]):void 0}}],(r=[{key:"componentDidMount",value:function(){var e=this;F.addChangeListener((function(){var t=[],n=[],r=!0,o=!1,a=void 0;try{for(var l,u=F.getTopBlocks(!0)[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var i=l.value;i.rendered&&A(i,n,t,"_:q")}}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}F.updateToolbox(V),0===n.length?e.setState({disabled:!0,quads:null}):(n.push("_:e <".concat("http://underlay.mit.edu/ns#satisfies","> ").concat("_:q"," _:p .")),n.push("_:e <".concat(s.f,"> <").concat("http://www.w3.org/ns/prov#Entity","> _:p .")),n.push("_:p <".concat(s.f,"> <").concat("http://underlay.mit.edu/ns#Query","> .\n")),e.setState({quads:n.join("\n"),disabled:!1}))}))}},{key:"render",value:function(){var e=this.state,n=e.disabled,r=e.q,a=e.values,l=e.prov,u=e.quads;return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{disabled:n,id:"query",onClick:this.handleClick},"Query"),o.a.createElement("details",null,o.a.createElement("summary",null,"Context"),o.a.createElement("pre",null,T)),null!==u&&o.a.createElement("details",null,o.a.createElement("summary",null,"Preview N-Quads"),o.a.createElement("div",{style:{overflowX:"scroll"}},o.a.createElement("pre",{style:{position:"relative"}},u))),o.a.createElement("div",{id:"context"}),t.renderResult(r,a,l))}}])&&j(n.prototype,r),a&&j(n,a),t}(o.a.Component);l.a.render(o.a.createElement(J,null),P)}});