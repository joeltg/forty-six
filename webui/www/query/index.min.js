!function(e){function t(t){for(var r,l,u=t[0],i=t[1],c=t[2],p=0,f=[];p<u.length;p++)l=u[p],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&f.push(a[l][0]),a[l]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);for(s&&s(t);f.length;)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var i=n[u];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={4:0},o=[];function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var u=window.webpackJsonp=window.webpackJsonp||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var s=i;o.push([422,0,1]),n()}({422:function(e,t,n){n(93),e.exports=n(427)},427:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(61),l=n.n(o),u=n(62),i=n.n(u),c=n(13),s=n(2),p=n(185);n(424);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}c.setLocale(p);var d="blank",y="iri",b="predicate",m="blank-predicate",v="literal";function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var l,u=e[Symbol.iterator]();!(r=(l=u.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}c.Blocks.node={init:function(){var e;this.jsonInit((f(e={type:"node",message0:"%1 %2",inputsInline:!0,args0:[{type:"input_value",name:"subject",check:[y,d]},{type:"input_statement",name:"predicate",check:[b,m]}]},"inputsInline",!0),f(e,"output","node"),f(e,"colour",100),e))}},c.Blocks[b]={init:function(){this.jsonInit({type:b,message0:"〈%1〉%2",args0:[{type:"field_input",name:"id"},{type:"input_value",name:"object",check:["String","Boolean","Number",v,y,d,"node"]}],previousStatement:[b,m],nextStatement:[b,m],colour:260})}},c.Blocks[m]={init:function(){this.jsonInit({type:m,message0:"_:%1 %2",args0:[{type:"field_variable",name:"id"},{type:"input_value",name:"object",check:["String","Boolean","Number",v,y,d,"node"]}],previousStatement:[b,m],nextStatement:[b,m],colour:180})}},c.Blocks[d]={init:function(){this.jsonInit({type:d,message0:"_∶%1",args0:[{type:"field_variable",name:"id"}],output:d,colour:330})}},c.Blocks[y]={init:function(){this.jsonInit({type:y,message0:"〈%1〉",args0:[{type:"field_input",name:"id"}],output:y,colour:30})}},c.Blocks[v]={init:function(){this.jsonInit({type:v,message0:'"%1"',message1:"‹%1›",args0:[{type:"field_input",name:"value"}],args1:[{type:"field_input",name:"type"}],output:v,colour:60})}};var S=document.getElementById("panel"),E=0,P=['block[type="node"] block[type="blank"]','block[type="blank-predicate"]','block[type="blank"]'].map((function(e){return document.querySelector("#toolbox > ".concat(e," field"))})),B={schema:"http://schema.org/",prov:"http://www.w3.org/ns/prov#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",dc:"http://purl.org/dc/elements/1.1/",u:"http://underlay.mit.edu/ns#"},I=JSON.stringify(B,null,"  "),q=document.getElementById("toolbox"),T=document.getElementById("blocklyArea"),V=document.getElementById("blocklyDiv"),N=c.inject(V,{toolbox:q}),C=function(e){var t=T.offsetWidth,n=T.offsetHeight,r=T,a=0,o=0;do{a+=r.offsetLeft,o+=r.offsetTop,r=r.offsetParent}while(r);V.style.left=a+"px",V.style.top=o+"px",V.style.width=t+"px",V.style.height=n+"px",c.svgResize(N)};addEventListener("resize",C,!1),C(),c.svgResize(N);var F={"@context":function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},B,{"prov:value":{"@container":"@list"}}),"@requireAll":!1,"u:satisfies":{},"prov:value":{},"prov:wasDerivedFrom":{}};function R(e,t,n,r){var a,o;switch(e.type){case"text":return a=A(e.getFieldValue("TEXT")),'"'.concat(a,'"');case"math_number":return o=(a=Number(e.getFieldValue("NUM")))===parseInt(a)?XSD_INTEGER:s.k,'"'.concat(a,'"^^<').concat(o,">");case"logic_boolean":return a=e.getFieldValue("BOOL").toLowerCase(),'"'.concat(a,'"^^<').concat(s.h,">");case v:return a=e.getFieldValue("value"),o=e.getFieldValue("type"),'"'.concat(A(a),'"^^<').concat(D(o),">");case y:return"<".concat(D(e.getFieldValue("id")),">");case d:return"_:".concat(N.getVariableById(e.getFieldValue("id")).name);case m:case b:return}var l=e.getInputTargetBlock("subject");if(null===l)return null;for(var u=R(l,t,n,r),i=e.getInputTargetBlock("predicate");null!==i;i=i.getNextBlock()){var c=i.getFieldValue("id"),p=i.type===m?"_:".concat(N.getVariableById(c).name):"<".concat(D(c),">"),f=i.getInputTargetBlock("object");if(null!==f){var g=R(f,t,n,r);null!==g&&t.push("".concat(u," ").concat(p," ").concat(g," ").concat(r," ."))}}return u}function D(e){for(var t in B)if(0===e.indexOf(t)&&":"===e[t.length])return B[t]+e.slice(t.length+1);return e}var A=function(e){return e.replace(/[\\"]/g,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")};N.createVariable("b0",null,"0"),N.registerButtonCallback("variable",(function(e){var t="b".concat(++E),n=(N.createVariable(t).getId(),!0),r=!1,a=void 0;try{for(var o,l=P[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){o.value.textContent=t}}catch(e){r=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}}));var L=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=O(t).call(this,e),n=!a||"object"!==g(a)&&"function"!=typeof a?j(r):a,_(j(n),"handleClick",(function(){var e,t,r,a,o,l,u,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(null!==n.state.quads){s.next=2;break}return s.abrupt("return");case 2:return console.log(n.state.quads),s.next=5,regeneratorRuntime.awrap(fetch("/",{method:"POST",headers:{"Content-Type":"application/n-quads"},body:n.state.quads}));case 5:if(200!==(e=s.sent).status){s.next=22;break}return s.next=9,regeneratorRuntime.awrap(e.json());case 9:return t=s.sent,console.log(t),s.next=13,regeneratorRuntime.awrap(i.a.frame(t,F));case 13:r=s.sent,a=h(r["@graph"],1),o=a[0],l=o["u:satisfies"],u=o["prov:value"],c=o["prov:wasDerivedFrom"],n.setState({q:l,values:u,prov:c}),s.next=24;break;case 22:console.error(e.statusText),n.setState({q:null,values:null,prov:null});case 24:case"end":return s.stop()}}))})),n.state={disabled:!0,quads:null,q:null,values:null,prov:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,o=[{key:"renderResult",value:function(e,n,r){if(null===e||null===n)return null;var o=e["@id"].indexOf("#");return a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:"2",className:"query"},"<",e["@id"],">")),Array.isArray(n)&&n.length>0&&null!==r?n.map((function(e,n){var r=e["@id"],l=e["rdf:value"];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,r.slice(o+1)),a.a.createElement("td",null,t.renderValue(l)))})):a.a.createElement("td",null,a.a.createElement("td",{colSpan:"2"},"No results"))))}},{key:"renderValue",value:function(e){return"object"!==g(e)?JSON.stringify(e):e.hasOwnProperty("@id")?"<".concat(e["@id"],">"):e.hasOwnProperty("@value")?JSON.stringify(e["@value"]):void 0}}],(r=[{key:"componentDidMount",value:function(){var e=this;N.addChangeListener((function(){var t=[],n=[],r=!0,a=!1,o=void 0;try{for(var l,u=N.getTopBlocks(!0)[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var i=l.value;i.rendered&&R(i,n,t,"_:q")}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}N.updateToolbox(q),0===n.length?e.setState({disabled:!0,quads:null}):(n.push("_:e <".concat("http://underlay.mit.edu/ns#satisfies","> ").concat("_:q"," _:p .")),n.push("_:e <".concat(s.f,"> <").concat("http://www.w3.org/ns/prov#Entity","> _:p .")),n.push("_:p <".concat(s.f,"> <").concat("http://underlay.mit.edu/ns#Query","> .\n")),e.setState({quads:n.join("\n"),disabled:!1}))}))}},{key:"render",value:function(){var e=this.state,n=e.disabled,r=e.q,o=e.values,l=e.prov,u=e.quads;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{disabled:n,id:"query",onClick:this.handleClick},"Query"),a.a.createElement("details",null,a.a.createElement("summary",null,"Context"),a.a.createElement("pre",null,I)),null!==u&&a.a.createElement("details",null,a.a.createElement("summary",null,"Preview N-Quads"),a.a.createElement("div",{style:{overflowX:"scroll"}},a.a.createElement("pre",{style:{position:"relative"}},u))),a.a.createElement("div",{id:"context"}),t.renderResult(r,o,l))}}])&&w(n.prototype,r),o&&w(n,o),t}(a.a.Component);l.a.render(a.a.createElement(L,null),S)}});